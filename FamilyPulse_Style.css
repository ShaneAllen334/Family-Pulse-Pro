:root { --primary: #FF6B6B; --gradient: linear-gradient(135deg, #FF6B6B 0%, #FF8E53 100%); --bg: #f4f6f8; --card-bg: #ffffff; --text: #2d3436; --chicken-bg: linear-gradient(135deg, #f1c40f 0%, #e67e22 100%); }
        body { background: var(--bg); margin: 0; padding: 0; font-family: 'Nunito', sans-serif; -webkit-tap-highlight-color: transparent; color: var(--text); padding-bottom: 80px; }
        .header { position: sticky; top: 0; z-index: 100; background: linear-gradient(135deg, rgba(255, 245, 245, 0.98), rgba(255, 230, 230, 0.98)); backdrop-filter: blur(8px); border-bottom: 1px solid rgba(0,0,0,0.05); padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 4px 15px rgba(0,0,0,0.03); }
        .brand { font-size: 20px; font-weight: 900; background: var(--gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; display:flex; flex-direction:column; align-items:flex-start; }
        .brand-main { display:flex; align-items:center; gap:8px; }
        .brand i { color: #e74c3c; -webkit-text-fill-color: #e74c3c; animation: pulseHeart 1.5s infinite; }
        .header-actions { display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; align-items:center; }
        .action-chip { background: white; border: 1px solid #eee; padding: 6px 14px; border-radius: 20px; font-weight: 800; font-size: 13px; cursor: pointer; display: flex; align-items: center; gap: 6px; box-shadow: 0 2px 5px rgba(0,0,0,0.02); transition: 0.2s; color: #555; }
        .action-chip:active { transform: translateY(2px); }
        .chip-help i { color: #0984e3; } .chip-logout i { color: #636e72; } .chip-dash i { color: #0984e3; }
        @keyframes pulseHeart { 0% {transform:scale(1);} 50% {transform:scale(1.2);} 100% {transform:scale(1);} }
        .story-bar { background: white; padding: 25px 0 20px 20px; overflow-x: auto; white-space: nowrap; scrollbar-width: none; box-shadow: 0 4px 15px rgba(0,0,0,0.02); }
        .story-bar::-webkit-scrollbar { display: none; }
        .story-item { display: inline-flex; flex-direction: column; align-items: center; margin-right: 18px; cursor: pointer; transition: 0.3s; position: relative; }
        .story-item.active { transform: scale(1.05); } 
        .avatar-ring { width: 56px; height: 56px; border-radius: 50%; padding: 2px; background: #eee; transition: 0.3s; position: relative; }
        .story-item.active .avatar-ring { background: var(--gradient); box-shadow: 0 4px 10px rgba(255, 107, 107, 0.3); }
        .avatar { width: 100%; height: 100%; border-radius: 50%; background: white; border: 2px solid white; display: flex; align-items: center; justify-content: center; font-size: 26px; }
        .story-name { margin-top: 6px; font-size: 11px; font-weight: 700; color: #636e72; }
        .edit-badge { position: absolute; top: -5px; right: -5px; background: #2d3436; color: white; border: 2px solid white; width: 20px; height: 20px; border-radius: 50%; font-size: 10px; display: flex; align-items: center; justify-content: center; z-index: 50; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .mood-badge { position: absolute; bottom: -2px; left: -2px; width: 20px; height: 20px; background: white; border-radius: 50%; font-size: 14px; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); z-index: 6; }
        .online-badge { position: absolute; top: 0px; right: 0px; background: #2ecc71; border: 2px solid white; width: 14px; height: 14px; border-radius: 50%; z-index:5; display:none; }
        .online-badge.is-online { display:block; }
        .crown-badge { position: absolute; top: -16px; left: 50%; transform: translateX(-50%); color: #f1c40f; font-size: 24px; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.2)); animation: bounce 2s infinite; z-index: 10; }
        .holiday-badge { position: absolute; top: -15px; right: -5px; font-size: 20px; z-index: 15; animation: bounce 3s infinite; }
        .farmer-badge { position: absolute; bottom: -5px; left: -8px; font-size: 22px; z-index: 21; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.3)); animation: shake 3s infinite; }
        .admin-badge { position: absolute; bottom: -5px; right: -5px; background: #3498db; color: white; border: 2px solid white; width: 22px; height: 22px; border-radius: 50%; font-size: 12px; display: flex; align-items: center; justify-content: center; z-index: 10; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        .nav-bar { background:white; padding:10px; display:flex; gap:10px; justify-content:space-around; border-bottom:1px solid #eee; margin-bottom:20px; overflow-x:auto; }
        .nav-item { flex:1; text-align:center; padding:10px; border-radius:12px; font-weight:800; font-size:12px; color:#555; background:#f8f9fa; cursor:pointer; display:flex; flex-direction:column; align-items:center; gap:5px; border:1px solid #eee; min-width:60px; }
        .nav-item:hover { background:#f0f0f0; border-color:#ddd; }
        .nav-item i { font-size:16px; margin-bottom:2px; }
        .pwa-banner { display:none; background:#2d3436; color:white; padding:15px; align-items:center; justify-content:space-between; position:fixed; bottom:0; left:0; width:100%; z-index:9000; box-sizing:border-box; box-shadow:0 -5px 15px rgba(0,0,0,0.2); }
        .container { max-width: 950px; margin: 0 auto; padding: 0 15px; display: flex; gap: 20px; align-items: flex-start; }
        .feed-col { flex: 1; min-width: 0; } .side-col { width: 280px; position: sticky; top: 90px; }
        @media (max-width: 850px) { .container { flex-direction: column; } .side-col { width: 100%; position: static; order: -1; margin-bottom: 20px; } }
        .card { background: var(--card-bg); border-radius: 16px; padding: 18px; margin-bottom: 20px; box-shadow: 0 4px 20px rgba(0,0,0,0.04); transition: transform 0.2s; position: relative;}
        .feed-header { display: flex; align-items: center; margin-bottom: 8px; }
        .feed-avatar { width: 42px; height: 42px; border-radius: 50%; background: #eee; display: flex; align-items: center; justify-content: center; font-size: 22px; margin-right: 12px; }
        .feed-meta h4 { margin: 0; font-size: 15px; font-weight: 800; } .feed-meta span { font-size: 11px; color: #999; font-weight: 600; text-transform: uppercase; }
        .feed-body { font-size: 15px; line-height: 1.5; color: #444; padding-left: 54px; word-break: break-word; }
        .composer textarea { width: 100%; border: none; background: #f8f9fa; border-radius: 12px; padding: 15px; font-family: inherit; font-size: 15px; resize: none; outline: none; box-sizing: border-box; min-height: 60px; }
        .composer textarea:focus { background: #fff; box-shadow: inset 0 0 0 2px #ffeaa7; }
        .mood-row { display: flex; gap: 15px; margin-top: 15px; justify-content: center; flex-wrap: wrap; }
        .mood-opt { font-size: 24px; opacity: 0.4; cursor: pointer; transition: 0.2s; filter: grayscale(80%); }
        .mood-opt.selected { opacity: 1.0; transform: scale(1.2); filter: grayscale(0%); }
        .status-dropdown { width: 100%; padding: 10px; border-radius: 12px; border: 1px solid #eee; background: #f1f2f6; color: #555; font-size: 14px; font-weight: 700; margin-top: 10px; cursor: pointer; outline: none; -webkit-appearance: none; -moz-appearance: none; appearance: none; background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23555' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 15px center; background-size: 16px; }
        .btn { background: var(--gradient); color: white; border: none; padding: 12px; border-radius: 12px; width: 100%; font-weight: 800; font-size: 14px; letter-spacing: 0.5px; margin-top: 15px; cursor: pointer; box-shadow: 0 4px 15px rgba(255, 107, 107, 0.25); transition: 0.2s; }
        .btn:active { transform: scale(0.98); } .btn:disabled { background: #ccc; cursor: default; box-shadow: none; }
        .btn-disabled { background: #ccc !important; pointer-events: none; opacity: 0.6; box-shadow: none !important; }
        .btn-secondary { background: white; color: #555; border: 2px solid #eee; width:auto; padding: 10px; font-size: 12px; margin-top: 15px; box-shadow:none; }
        .btn-secondary:hover { border-color: #ddd; color: #333; }
        .replies { margin-top: 15px; background: #f8f9fa; border-radius: 10px; padding: 12px; margin-left: 54px; font-size: 13px; }
        .reply-item { margin-bottom: 6px; padding-bottom: 6px; border-bottom: 1px dashed #eee; display: flex; gap: 5px; flex-direction:column;} .reply-item:last-child { border: none; margin: 0; padding: 0; }
        .action-row { display:flex; align-items:center; gap:20px; margin-top:10px; padding-left:54px; }
        .action-item { font-size: 12px; font-weight: 700; color: #999; cursor: pointer; display: flex; align-items: center; gap: 5px; position:relative; }
        .action-item:hover { color: var(--primary); }
        .reply-actions { display:flex; gap:10px; margin-left:5px; }
        .reply-btn { cursor:pointer; font-size:12px; color:#bbb; opacity:0.3; transition:0.2s; filter:grayscale(100%); }
        .reply-btn.hover { opacity:1; filter:grayscale(0%); } .reply-btn.active { opacity:1; filter:grayscale(0%); font-weight:bold; }
        .reply-btn.up { color:#2ecc71; } .reply-btn.down { color:#e74c3c; } 
        .emote-picker { position: absolute; bottom: 25px; left: -10px; background: white; padding: 5px; border-radius: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); display: none; align-items: center; gap: 5px; z-index:50; }
        .emote-picker.show { display: flex; animation: fadeIn 0.2s; }
        .emote-opt { font-size: 20px; cursor: pointer; transition: 0.2s; padding:2px; } .emote-opt:hover { transform: scale(1.3); }
        .lb-card { padding:15px; border-radius:12px; margin-bottom:10px; color:white; }
        .lb-dropdown-btn { width: 100%; padding: 12px; background: white; border: 1px solid #eee; border-radius: 12px; color: var(--primary); font-weight: 800; cursor: pointer; text-align: left; display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; box-shadow: 0 4px 15px rgba(0,0,0,0.02); }
        .lb-content { display: none; }
        .lb-row { display: flex; align-items: center; padding: 8px 0; border-bottom: 1px solid rgba(255,255,255,0.2); }
        .lb-rank { width: 25px; text-align: center; margin-right: 10px; font-size: 16px; }
        .lb-info { flex: 1; } .lb-name { font-size: 13px; font-weight: 700; color: white; } .lb-sub { font-size: 11px; color: rgba(255,255,255,0.8); }
        .visibility-toggle { cursor: pointer; font-size: 12px; color: #999; display:inline-block; } .visibility-toggle:hover { color: var(--primary); }
        .hidden-placeholder { background: white; padding: 10px; border-radius: 12px; text-align: center; border: 1px dashed #ccc; color: #999; font-size: 12px; cursor: pointer; margin-bottom: 20px; font-weight: bold; display: none; }
        .tools-row { display: flex; align-items: center; margin-top: 10px; padding-top: 10px; border-top: 1px solid #eee; gap:10px; flex-wrap:wrap;}
        .pin-btn { font-size: 12px; font-weight: 700; color: #999; cursor: pointer; display: flex; align-items: center; gap: 5px; transition: 0.2s; }
        .pin-btn.active { color: #d35400; } .pin-btn:hover { color:var(--primary); }
        .grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 10px; margin-top: 20px; }
        .grid-item { font-size: 26px; padding: 8px; border-radius: 8px; cursor: pointer; transition: 0.2s; } .grid-item:hover { background: #eee; transform: scale(1.1); }
        .modal { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.6); backdrop-filter: blur(5px); z-index: 1000; display: none; align-items: center; justify-content: center; }
        .modal-content { background: white; width: 90%; max-width: 340px; border-radius: 24px; padding: 25px; text-align: center; box-shadow: 0 10px 40px rgba(0,0,0,0.3); max-height: 80vh; overflow-y: auto; position:relative; }
        .modal-help-btn { position: absolute; top: 15px; right: 15px; width: 24px; height: 24px; border-radius: 50%; background: #eee; color: #555; display: flex; align-items: center; justify-content: center; cursor: pointer; font-weight: bold; font-size: 14px; }
        .hidden { display: none !important; }
        .chicken-header { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; }
        .chicken-icon { width: 60px; height: 60px; background: var(--chicken-bg); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 30px; box-shadow: 0 4px 10px rgba(230,126,34,0.4); }
        .coop-help-icon { position:absolute; top:15px; right:15px; color:#e67e22; font-size:18px; cursor:pointer; }
        .stat-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 15px; }
        .stat-box { background: white; padding: 8px; border-radius: 8px; text-align: center; border: 1px solid #eee; }
        .stat-val { font-weight: 800; font-size: 16px; color: #2d3436; } .stat-lbl { font-size: 10px; text-transform: uppercase; color: #999; font-weight: 700; }
        .battle-hud { display:flex; justify-content:space-between; margin-bottom:15px; align-items:flex-end; }
        .hud-side { width: 45%; } .hud-name { font-size:11px; font-weight:800; color:#555; margin-bottom:3px; }
        .hp-bar-outer { width:100%; height:14px; background:#ddd; border-radius:7px; overflow:hidden; position:relative; box-shadow:inset 0 1px 3px rgba(0,0,0,0.1); }
        .hp-bar-inner { height:100%; width:100%; background:#2ecc71; transition:width 0.3s; }
        .battle-anim-container { height: 80px; display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; position:relative; overflow:hidden; padding:0 20px; }
        @keyframes lungeRight { 0% {transform: translateX(0);} 50% {transform: translateX(40px);} 100% {transform: translateX(0);} }
        @keyframes lungeLeft { 0% {transform: translateX(0);} 50% {transform: translateX(-40px);} 100% {transform: translateX(0);} }
        @keyframes shake { 0%, 100% {transform: translateX(0);} 25% {transform: translateX(-5px) rotate(-5deg);} 75% {transform: translateX(5px) rotate(5deg);} }
        @keyframes bigShake { 0%, 100% {transform: scale(1);} 25% {transform: scale(1.2) rotate(-10deg);} 75% {transform: scale(1.2) rotate(10deg);} }
        @keyframes fadeUp { 0% {opacity:1; transform:translateY(0);} 100% {opacity:0; transform:translateY(-30px);} }
        @keyframes bossDefeat { 0% {transform:scale(0); opacity:0;} 50% {transform:scale(1.2); opacity:1;} 100% {transform:scale(1); opacity:1;} }
        .anim-lunge-r { animation: lungeRight 0.3s ease-in-out; }
        .anim-lunge-l { animation: lungeLeft 0.3s ease-in-out; }
        .anim-hit { animation: shake 0.4s ease-in-out; }
        .anim-crush { animation: bigShake 0.5s ease-in-out; filter: drop-shadow(0 0 10px red); }
        .anim-miss { opacity: 0.5; }
        .log-win { color: #27ae60; font-weight:bold; } .log-dmg { color: #e74c3c; font-weight:bold; } .log-crit { color: #f1c40f; font-weight:bold; }
        .farm-btn { background: linear-gradient(to bottom, #2ecc71 0%, #27ae60 80%); border-bottom: 5px solid #d35400; width: 100%; padding: 12px; border-radius: 10px; color: white; border-top: none; border-left: none; border-right: none; font-weight: 800; margin-top: 10px; cursor: pointer; }
        .help-section { text-align: left; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 1px dashed #eee; }
        .help-title { font-weight: 800; color: var(--primary); font-size: 14px; margin-bottom: 5px; }
        @keyframes fadeIn { from {opacity:0; transform:translateY(5px);} to {opacity:1; transform:translateY(0);} }
        @keyframes popIn { from {opacity:0; transform:scale(0.8);} to {opacity:1; transform:scale(1);} }
        .farm-scene { position: relative; height: 100px; width: 100%; overflow: hidden; display: none; align-items:center; justify-content:center; }
        .farm-scene.active { display: flex; }
        .farm-chicken { font-size: 50px; position: absolute; left: 0; animation: walkToBarn 2s forwards linear; z-index:2; }
        .farm-barn { font-size: 50px; position: absolute; right: 20px; }
        @keyframes walkToBarn { 0% { left: 0; transform:scaleX(-1); } 100% { left: 70%; transform:scaleX(-1); } }
        .hp-text { font-size: 10px; font-weight: bold; text-align: center; margin-top: 2px; color: #555; }
        .timer-text { font-size:11px; font-weight:bold; color:#555; background:rgba(255,255,255,0.7); padding:3px 8px; border-radius:10px; }
        .reward-popup { animation: popIn 0.5s ease-out; z-index: 5000; position:relative; }
        .reward-icon { font-size:50px; margin-bottom:10px; animation:bounce 1s infinite; display:inline-block; }
        .shop-item { display:flex; align-items:center; padding:10px; background:#f4f6f8; border-radius:12px; margin-bottom:10px; }
        .item-icon { font-size:30px; margin-right:15px; } .item-details { flex:1; text-align:left; }
        .welcome-metric { display:flex; align-items:center; margin-bottom:8px; padding:5px; border-bottom:1px dashed #eee; }
        .wm-icon { font-size:20px; margin-right:10px; width:30px; text-align:center; } .wm-text { font-size:14px; font-weight:bold; color:#555; }
        .wm-val { margin-left:auto; font-weight:900; color:#2d3436; background:#eee; padding:2px 8px; border-radius:10px; font-size:12px; }
        .switch{position:relative;display:inline-block;width:34px;height:20px;margin-left:auto}
        .switch input{opacity:0;width:0;height:0}
        .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background-color:rgba(0,0,0,0.2);transition:.4s;border-radius:34px}
        .slider:before{position:absolute;content:"";height:14px;width:14px;left:3px;bottom:3px;background-color:white;transition:.4s;border-radius:50%}
        input:checked + .slider{background-color:#2ecc71}
        input:checked + .slider:before{transform:translateX(14px)}
        .hab-row{display:flex;align-items:center;margin-bottom:8px;color:white;font-weight:700;font-size:13px}
        .tr-btn { cursor:pointer; background:#2ecc71; color:white; border-radius:4px; padding:0 5px; font-size:12px; font-weight:bold; margin-left:5px; display:inline-block;}
        .tr-btn:hover { background:#27ae60; }
        .disabled-habit { opacity: 0.5; pointer-events: none; }
        .tired-tag { color: white; background: #e74c3c; padding: 2px 6px; border-radius: 8px; font-size: 10px; font-weight: bold; margin-left: 5px; }
        .bonus-section { margin-top:15px; padding-top:10px; border-top:1px solid rgba(255,255,255,0.2); }
        .adv-card { background:#f4f6f8; border-radius:12px; padding:15px; margin-bottom:10px; text-align:center; border:2px dashed #9b59b6; }
        .poll-card { padding: 10px; } .poll-q { font-weight: 800; color: #2d3436; margin-bottom: 10px; font-size: 13px; }
        .poll-opt { border: 1px solid #eee; padding: 10px; border-radius: 8px; margin-bottom: 8px; cursor: pointer; transition: 0.2s; font-size: 12px; font-weight: bold; color: #555; display:flex; justify-content:space-between; align-items:center;}
        .poll-opt:hover { background: #f9f9f9; border-color: #ddd; }
        .poll-opt.voted { border-color: var(--primary); background: #fff0f0; color: var(--primary); }
        .poll-res-row { margin-bottom: 8px; } .poll-res-txt { font-size: 11px; font-weight: bold; display: flex; justify-content: space-between; margin-bottom: 3px; }
        .poll-bar-bg { width: 100%; height: 8px; background: #eee; border-radius: 4px; overflow: hidden; }
        .poll-bar-fill { height: 100%; background: linear-gradient(90deg, #0984e3, #74b9ff); border-radius: 4px; transition: width 0.5s ease; }
        .poll-closed-badge { background: #636e72; color: white; padding: 2px 6px; border-radius: 4px; font-size: 9px; text-transform: uppercase; float: right; }
        .adv-zone-btn { background: white; border: 2px solid #eee; border-radius: 12px; padding: 10px; margin-bottom: 8px; cursor: pointer; display: flex; align-items: center; transition: 0.2s; }
        .adv-zone-btn:hover { border-color: #9b59b6; background: #fdf5ff; }
        .adv-zone-btn.locked { opacity: 0.5; pointer-events: none; filter: grayscale(100%); }
        .adv-icon { font-size: 24px; margin-right: 15px; }
        .adv-info h4 { margin:0; font-size:14px; font-weight:800; color:#333; }
        .adv-info p { margin:0; font-size:10px; color:#888; }
        .revive-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 20px; box-shadow: 0 0 50px rgba(46, 204, 113, 0.5); z-index: 6000; text-align: center; display: none; border: 4px solid #2ecc71; }
        .loss-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 20px; box-shadow: 0 0 50px rgba(231, 76, 60, 0.5); z-index: 6000; text-align: center; display: none; border: 4px solid #e74c3c; width: 80%; max-width: 300px; }
        .unconscious-popup { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 30px; border-radius: 20px; box-shadow: 0 0 50px rgba(192, 57, 43, 0.5); z-index: 7000; text-align: center; display: none; border: 4px solid #c0392b; width: 80%; max-width: 300px; }
        .completed-boss { background: #dff9fb; border-color: #81ecec; pointer-events:none; opacity:0.7; }
        .hp-mini-bar { width: 100%; height: 6px; background: #ddd; border-radius: 3px; margin-top: 5px; overflow: hidden; }
        .hp-mini-fill { height: 100%; background: #2ecc71; }
        .boss-overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.85); z-index:9999; display:none; flex-direction:column; align-items:center; justify-content:center; color:white; }
        .boss-txt { font-size:40px; font-weight:900; color:#f1c40f; text-transform:uppercase; animation: bossDefeat 1s forwards; text-shadow:0 0 20px rgba(241, 196, 15, 0.5); text-align:center; }
        .boss-sub { font-size:16px; margin-top:20px; opacity:0; animation: fadeIn 1s 1s forwards; }